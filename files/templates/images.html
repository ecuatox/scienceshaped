{% load staticfiles %}
<html>

  <head>
    <title>Images</title>
    {% include 'material_design_links.html' %}
    <link href="{% static "css/images.css" %}" rel="stylesheet">
    <link href="{% static "css/colors.css" %}" rel="stylesheet">
  </head>

  <body>

    <section id="images">

      <form id="searchForm" action="/files/images/" method="post">
        <!-- <label>Title or tag:</label> -->
        {% csrf_token %}
        <input id="id_search" name="search" maxlength="100" value="{{ searchText }}">
        <button id="submit" class="btn waves-effect waves-light" type="submit" name="action">Search
          <img src="{% static "img/ic_search_white_24px.svg" %}">
        </button>
      </form>

      {% for image in images %}
      <div class="imageItem card" url="/static/media/{{ image.file }}">
        <div class="card-image" style="background-image: url(/static/media/{{ image.file }});">
        </div>
        <div class="card-content">
          <p>
            {% if image.title|length > 18 %}
              {{ image.title|slice:":15"|capfirst }}...
            {% else %}
              {{ image.title|capfirst }}
              {% if image.number > 0 %}
                {{ image.number|add:"1" }}
              {% endif %}
            {% endif %}
          </p>
          <p class="date">
            {{ image.time|date:"F d, Y, H:i:s" }}
          </p>
        </div>
      </div>
      {% endfor %}
    </section>

    <section id="preview">
    <div id="previewItem" class="card">
      <div class="card-image">
        <img id="previewImage" src="{% static "img/preview.png" %}">
      </div>
    </div>

    <a href="#" class="btn waves-effect waves-light">Select</a>
    </section>

  </body>

  <script>
    $(".imageItem").click(function() {
      $(".imageItem").removeClass("selected");
      $(this).addClass("selected");
      var src = $(this).attr("url");
      $("#previewImage").attr("src", src);
    });
  </script>

</html>
