{% extends 'scienceshaped/base.html' %}
{% load staticfiles %}

{% block title %}
  Upload new image
{% endblock title %}

{% block header %}
{% endblock header %}

{% block footer %}
{% endblock footer %}

{% block head %}
  <link rel="stylesheet" type="text/css" href="{% static "files/css/image_upload.css" %}">
{% endblock head %}

{% block content %}

<div class="ui middle aligned center aligned grid">
  <div class="column">
    <h2 class="ui header blue">
      Upload new image
    </h2>
    <form class="ui large form" action="/files/image-upload/" enctype="multipart/form-data" method="post">
      {% csrf_token %}

      <div class="ui segment">
        <div class="field">
          <label for="{{ form.title.id_for_label }}">
            Title
          </label>
          <div class="ui left input">
            <input id="{{ form.title.id_for_label }}"
              name="title"
              placeholder=""
              type="text"
              maxlength="{{ form.fields.title.max_length }}"
              value="{{ form.title.value }}">
          </div>

          {% if form.title.errors %}
            <div class="ui blue pointing label">
              {{ form.title.errors.0 }}
            </div>
          {% endif %}
        </div>

        <div class="field">
          <label for="{{ form.description.id_for_label }}">
            Description
          </label>
          <div class="ui left input">
            <textarea id="{{ form.description.id_for_label }}"
              name="description"
              placeholder=""
              type="text"
              maxlength="{{ form.fields.description.max_length }}"
            >{{ form.description.value }}</textarea>
          </div>

          {% if form.description.errors %}
            <div class="ui blue pointing label">
              {{ form.description.errors.0 }}
            </div>
          {% endif %}
        </div>

        <div class="field">
          <label for="{{ form.tags.id_for_label }}">
            Tags
          </label>
          <div class="ui fluid multiple search normal selection dropdown">
            <input id="{{ form.tags.id_for_label }}"
              type="hiddel"
              name="tags"
              type="text"
              maxlength="{{ form.fields.tags.max_length }}"
              value="{{ form.tags.value }}">
            <i class="dropdown icon"></i>
            <div class="default text">Select Tags</div>
            <div class="menu">
              {% for tag in tags %}
                <div class="item" data-value="{{ tag }}">{{ tag|title }}</div>
              {% endfor %}
            </div>

            {% if form.tags.errors %}
              <div class="ui blue pointing label">
                {{ form.tags.errors.0 }}
              </div>
            {% endif %}
          </div>
        </div>

        <div class="field file">
          <div class="disabled field">
            <input id="file_dummy" type="text" disabled="" tabindex="-1" value="{{ form.file.value }}">
          </div>

          <label for="id_file" class="ui icon button upload blue">
            <i class="file icon"></i>
            File
          </label>
          <input id="id_file" type="file" name="file" style="display: none;">

          {% if form.file.errors %}
            <div class="ui blue pointing label">
              {{ form.file.errors.0 }}
            </div>
          {% endif %}
        </div>

        {% if message %}
          <div class="ui tiny red message">
            <p>{{ message }}</p>
          </div>
        {% endif %}

        <div class="ui fluid large submit button blue">Save</div>

      </div>
    </form>
    <script src="{% static "files/js/image_upload.js" %}"></script>
  </div>
</div>

{% endblock content %}
