{% load staticfiles %}
{% load tags %}

<link href="{% static "css/illustrations.css" %}" rel="stylesheet">

<section id="illustrations">
  <div id="illustrationsTop">
    <h3>Illustrations</h3>

    <div id="categoriesButtonDiv">
      <a id="categoriesButton" class='dropdown-button btn' data-beloworigin="true" data-activates='categories'>Categories</a>
    </div>

    <div id="categoriesDiv">
      <ul id="categories" class="dropdown-content">
        <li><a class="filterItem">All</a></li>
        <li><a class="filterItem">Logo</a></li>
        <li><a class="filterItem">Grant Application</a></li>
        <li><a class="filterItem">Doctoral Thesis</a></li>
      </ul>
    </div>

    <form action="/" method="post">
      {% csrf_token %}
      {{ form }}
    </form>

    <script>
      $(".filterItem").click(function() {
        $("#id_search").val($(this).html());
        $("form").submit();
      });
    </script>
  </div>

  <br><br>

  {% for illustration in illustrations %}
    <div class="illustration card">
      <div class="card-image">
        <img src="{{ illustration.thumbnail }}" style="width: calc({{ illustration.thumbnail_size }} / 100 * 350px)">
      </div>
      <div class="card-content">
        <h5>{{ illustration.title }}</h5>
        <p>{{ illustration.description }}</p>
      </div>
      <div class="card-action cardActions">
        <a class="waves-effect waves-teal btn-flat readmore">Read more</a>
      </div>
      {% if request.user|inGroup:"editor" %}
        <div class="card-action adminActions">
          <a href="/projects/illustration/{{ illustration.id }}/edit" class="waves-effect waves-teal btn-flat">Edit</a>
          <a href="/admin/projects/illustration/{{ illustration.id }}/delete/" class="waves-effect waves-teal btn-flat">Delete</a>
        </div>
      {% endif %}
    </div>
  {% endfor %}
</section>
