{% load staticfiles %}
{% load authentication_groups %}

<section id="testimonials">
  <div id="testimonial-para-container">
    <div class="para para2"></div>
    <div class="para para3"></div>
    <div class="para para4"></div>
    <h1>Testimonials</h1>
    <div id="slider">
      {% for testimonial in testimonials %}
        <div class="ui segment container">
          {% if request.user|inGroup:"editor" %}
            <div class="editor buttons">
              <a class="ui green right ribbon label" href="/projects/testimonial/{{ testimonial.id }}/edit">Edit</a>
              <br>
              <a class="ui red right ribbon label delete openmodal" url="/projects/testimonial/{{ testimonial.id }}/delete/">Delete</a>
            </div>
          {% endif %}
          <div class="ui stackable grid">
            <div class="five wide column left">
              <img class="testimonial image" src="{{ testimonial.thumbnail.url }}">
            </div>
            <div class="ten wide column right">
              <p class="testimonial message"><i class="icon quote left"></i> {{ testimonial.message }} <i class="icon quote right"></i></p>
              <p class="testimonial person"><strong>{{ testimonial.person }}</strong></p>
              {% if testimonial.job != '' %}
                <p class="testimonial job">{{ testimonial.job }}</p>
              {% endif %}
            </div>
          </div>
          <p class="testimonial date">{{ testimonial.date|date:"M Y"}}</p>
        </div>
      {% endfor %}
    </div>
  </div>

  {% if request.user|inGroup:"editor" %}
  <a id="newTestimonial" href="/projects/testimonial/0/edit" class="btn-floating btn-large waves-effect waves-light white"></a>
  {% endif %}

</section>

<script>
  $(function() {
    testimonialpara();
  });
  $(window).resize(function() {
    testimonialpara();
  });
  $(document).scroll(function() {
    testimonialpara();
  });
  function testimonialpara() {
    var scroll = $(window).scrollTop() - 1000;
    $("#testimonial-para-container .para2").css("transform", "rotate(-20deg) translate(" + scroll*0.05 + "px, " + scroll*0.5 + "px)");
    $("#testimonial-para-container .para3").css("transform", "rotate(-50deg) translate(" + scroll*0.1 + "px, " + scroll*0.1 + "px)");
    $("#testimonial-para-container .para4").css("transform", "rotate(25deg) translate(-" + scroll*0.1 + "px, " + scroll*0.1 + "px)");
  }
</script>
